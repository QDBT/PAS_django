{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}My Application{% endblock %}</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/9cd06d1369.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="AllContainer1">
        <div class="AllContainer2">
            <div class="AllContainer3">
                <div class="AllContainer4">
                    <header class="topbar">
                        <div class="topbar-left">
                            <button id="SideBarButton" class="btn btn-primary mr-2">
                                <i class="fa-solid fa-bars"></i>
                            </button>
                            <div class="logo mr-2" id="logo">
                                <a href="{% url 'home' username %}">
                                    <img src="{% static 'images/Logo.jpg' %}" height="30px" width="80px">
                                </a>
                            </div>
                            <div class="project-title">
                                <h1 class="h5">{{ project.title }}</h1> <!-- Smaller title size -->
                            </div>
                        </div>
                        <div class="topbar-middle">
                            <button id="Debug" class="btn btn-success mb-4">
                                <i class="fa-solid fa-play"></i>
                                <span>Run</span>
                            </button>
                        </div>
                        <div class="topbar-right">
                            {{ project.user }}
                        </div>
                        <input type="hidden" id="current-snippet-id" value=""> <!--To store the snippet ID-->
                    </header>
                    <div class="SideBarMain-container" >
                        <div class="SideBarContainer-1">
                            <div class="SideBarContainer-2">
                                <div class="SideBarContainer-3">
                                    <div class="SideBarSearch-1">
                                        <div class="SideBarSearch-2">
                                            <div class="SideBarSearch-3">
                                                <div class="SideBarSearch-4">
                                                    <div class="SideBarSearch-5">
                                                        <div class="SideBarSearch-6">
                                                            <input type="text" placeholder="Search" id="Search" class="SideBarSearch-Input">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="SideBarFilesHistory">
                                        <div class="resizer" style="position: relative; transition: height 120ms ease-out; height: 492px;">
                                            <div class="SideBarFilesOptions">
                                                <button class="SideBarFilesOptionsLeft">
                                                    <i class="fa-solid fa-angle-down Icon"></i>
                                                    <div class="ButtonExplain">
                                                        <span class="ButtonExplainSpan">Files</span>
                                                    </div>
                                                </button>
                                                <div class="SideBarFilesOptionsRight">
                                                    <button class="OptionButton">
                                                        <i class="fa-solid fa-file-circle-plus Icon"></i>
                                                    </button>
                                                    <button class="OptionButton">
                                                        <i class="fa-solid fa-folder-plus Icon" style="color: #FFD43B;"></i>
                                                    </button>
                                                    <button class="OptionButton">
                                                        <i class="fa-solid fa-ellipsis-vertical Icon"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="SideBarFilesIndex1">
                                                <div class="SideBarFilesIndex2">
                                                    <div class="SideBarFilesIndex3">
                                                        <div class="SideBarFilesIndex4">
                                                            <div class="SideBarFilesIndex5">
                                                                <div role="tree" class="SideBarFilesIndex6">
                                                                    <div role="treeitem" class="SideBarFilesTreeItems">
                                                                        <div title="" class="SideBarFilesTreeItems1">
                                                                            <div class="SideBarFilesIcon">
                                                                                <img class="Icon" src="{% static 'images/Python.jpg' %}"></img>
                                                                            </div>
                                                                            <div class="SideBarFilesName">{{snippets}}</div>
    
                                                                        </div>
                                                                        <button title="menu" class="SideBarFilesMenuButton">
                                                                            <img class="Icon"></img>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="SideBarFilesHistoryDivider1">
                                                <div class="SideBarFilesHistoryDivider2"></div>
                                            </div>
                                        </div>
                                        <div class="resizer" style="position: relative;
                                        transition: height 120ms ease-out;
                                        height: 340px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="divider">
                            <div class="blanket"></div>
                            <div class="grip"></div>
                        </div>
                        <main id="main-content" class="MainContainer">
                            {% block content %}{% endblock %}
                        </main>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
    // Debug button functionality
    document.getElementById('Debug').addEventListener('click', function() {
            const activeEditor = document.querySelector('.CodeMirror');
            if (activeEditor) {
                const textarea = activeEditor.CodeMirror.getTextArea();
                textarea.value = activeEditor.CodeMirror.getValue(); // Ensure textarea value is updated
                const form = textarea.closest('form');
                if (form) {
                    const snippetId = textarea.id.split('-')[1];
                    console.log("Snippet ID:", snippetId);
                    document.getElementById('current-snippet-id').value = snippetId; // Log the snippet ID
                    const code = textarea.value;
                    const url = `/'{{username}}'/'{{project.title}}'/save_snippet/${snippetId}/`;
                    fetch(url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': '{{ csrf_token }}'
                        },
                        body: JSON.stringify({ code: code })
                    })
                    .then(response => {
                        if (!response.ok) {
                            console.log("data:",'{{data}}')
                            return response.text().then(text => { throw new Error(text) });
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log('Snippet saved successfully:', data);
                        document.getElementById('output').innerText = data.output;
                        document.getElementById('error').innerText = data.error;
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('An error occurred: ' + error.message);
                    });
                }
            } else {
                checkCodeMirrorValue();
                alert('No active editor to save.');
            }

            // Display the help option after running the code
            if (CanActiveDisplay){
                document.getElementById('help-option').style.display = 'block';
            }
        });

        function checkCodeMirrorValue() {
        // Ensure CodeMirror instance is available
        var codeMirrorInstance = document.querySelector('.CodeMirror');
        if (codeMirrorInstance) {
            var editor = codeMirrorInstance.CodeMirror;
            console.log('CodeMirror Value:', editor.getValue());
        } else {
            console.log('No CodeMirror instance found');
        }
    }
//----------------------------------------------------------------
    //  libraries
    function compareDividers(div1, div2) {
        // Collect differences
        const differences = [];

        // Check attributes (for simplicity, we only check 'data-transformx' here, but you can add more attributes)
        const attributes = ['data-transformx'];
        attributes.forEach(attr => {
            const val1 = div1.getAttribute(attr);
            const val2 = div2.getAttribute(attr);
            if (val1 !== val2) {
                differences.push(`Difference in attribute '${attr}': ${val1} vs ${val2}`);
            }
        });

        // Check class names
        if (div1.className !== div2.className) {
            differences.push(`Difference in class names: '${div1.className}' vs '${div2.className}'`);
        }

        // Check CSS custom properties
        const cssProperties = ['--transformX', '--height', '--width'];
        cssProperties.forEach(cssProp => {
            const val1 = getComputedStyle(div1).getPropertyValue(cssProp);
            const val2 = getComputedStyle(div2).getPropertyValue(cssProp);
            if (val1 !== val2) {
                differences.push(`Difference in CSS variable '${cssProp}': ${val1} vs ${val2}`);
            }
        });

        // Check bounding box positions (top, left, width, height)
        const rect1 = div1.getBoundingClientRect();
        const rect2 = div2.getBoundingClientRect();
        if (rect1.left !== rect2.left || rect1.top !== rect2.top || rect1.width !== rect2.width || rect1.height !== rect2.height) {
            differences.push(`Difference in position: left=${rect1.left}, top=${rect1.top}, width=${rect1.width}, height=${rect1.height} vs left=${rect2.left}, top=${rect2.top}, width=${rect2.width}, height=${rect2.height}`);
        }

        // Check inner HTML content
        if (div1.innerHTML !== div2.innerHTML) {
            differences.push('Difference in inner HTML content');
        }

        // Output all differences or confirm equality
        if (differences.length > 0) {
            //console.log('Differences found:', differences);
            return false;
        } else {
           // console.log('No differences found between the two dividers.');
            return true;
        }
    };

    // A Function to reset all things positions in main
    function controlMainWidth(sidebarWidth,dividerWidth){
        const mainWidth=window.innerWidth-(sidebarWidth+dividerWidth);
        const panel=document.querySelector('.panelAll');
        const panelTransformX=sidebarWidth+dividerWidth;
        const snippetBar=document.querySelector('.snippetBar')
        panel.style.setProperty('--width', `${mainWidth}px`);
        panel.style.setProperty('--transformX', `${panelTransformX}px`);
        snippetBar.style.setProperty('--width', `${mainWidth}px`);
        snippetBar.style.setProperty('--left', `${panelTransformX}px`);
    };
    
    </script>


   
    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!--CodeMirror Style Sheet-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/theme/dracula.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/addon/edit/closebrackets.min.js"></script>

    <!--Interact.js for Drag and Resize-->
    <script src="https://cdn.jsdelivr.net/npm/interactjs@1.10.11/dist/interact.min.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {

            //Initial CSS style
            const root = document.getElement;
            const Topbar=document.querySelector(".topbar");
            const SidebarMain = document.querySelector('.SideBarMain-container');
            let TopbarHeight = 50;
            Topbar.style.setProperty('height', `${TopbarHeight}px`);
            SidebarMain.style.setProperty('top', `${TopbarHeight}px`);
            SidebarMain.style.setProperty('height', `calc(100% - ${TopbarHeight}px)`);

            //Initial Css style for OptionButtonIcon
            const OptionButtonIcon = document.querySelectorAll(".OptionButton");
            let IconWidth =24;
            let IconHeight =24;
            OptionButtonIcon.forEach(icon => {
                icon.style.setProperty('--width', `${IconWidth}px`);
                icon.style.setProperty('--height', `${IconHeight}px`);
            });

            //Initial CSS style for sidebar
            const sidebar = document.querySelector('.SideBarContainer-1');
            let sidebarWidth = 250;
            let CurrentSidebarWidth =sidebarWidth;
            sidebar.style.setProperty('--width', `${CurrentSidebarWidth}px`);
            let sidebarWidthBeforeClosed = 0;

            const sidebarNextElement = sidebar.nextElementSibling;
            let dividerNextToSidebar; // Find the divider next to sidebar
            // Loop to find the closest sibling with the class 'divider'
            while (sidebarNextElement) {
                if (sidebarNextElement.classList.contains('divider')) {
                    dividerNextToSidebar = sidebarNextElement;// define the divider next to sidebar
                    break; // Stop the loop once the .divider element is found
                }
                sidebarNextElement = sidebarNextElement.nextElementSibling; // Move to the next sibling
            }

            //Sidebar open/close
            document.getElementById('SideBarButton').addEventListener('click', function() {
                if (CurrentSidebarWidth >0) {
                    //Collapse sidebar
                    sidebarWidthBeforeClosed = CurrentSidebarWidth;
                    CurrentSidebarWidth = 0;
                } else{
                    //Expand sidebar
                    CurrentSidebarWidth = sidebarWidthBeforeClosed;
                }
                console.log(CurrentSidebarWidth);
                sidebar.style.setProperty('--width', `${CurrentSidebarWidth}px`);// set the width
                dividerNextToSidebar.style.setProperty('--transformX', `${CurrentSidebarWidth}px`);// set the divider
                controlMainWidth(CurrentSidebarWidth,DividerWidth);
            });

            //Initial CSS style for divider
            const dividers=document.querySelectorAll(".divider");//Select all the divider elements
            let isDragging = false;
            let startX = 0;
            let currentX = 0;
            let InitialTransformX=0;//The initial position of the divider being dragged
            let CurrentDivider = null;//Track which divider is being dragged
            let transformVariable = '';//Track the CSS variable name for each divider
            let DividerHeight=910;
            let DividerWidth=6;
            let gripWidth =2;
            let gripHeight =20;
            let gripColor = '#2B3245';
            let gripColorHover ='#e2d8d87f';
            let cursor='col-resize';
            let DividerBackgroundColor ='#0E1525';
            let DividerBackgroundColorMove ='#4689b8';


            //Initial style for allsnippetBar
            const snippetBars=document.querySelectorAll('.snippetBar');
            let snippetBarLeft = CurrentSidebarWidth + DividerWidth;
            let snippetBarTop = 0;
            let snippetBarWidth = window.innerWidth -(CurrentSidebarWidth + DividerWidth);
            let snippetBarHeight = 32;
            let snippetBarScale = 1;
            let snippetBarTransformOriginX = 0;
            let snippetBarTransitionDuration = 0;
            
            //Initial style for eachsnippetBar
            snippetBars.forEach((snippetBar,index) =>{
                snippetBar.style.setProperty('--left', `${snippetBarLeft}px`);
                snippetBar.style.setProperty('--top', `${snippetBarTop}px`);
                snippetBar.style.setProperty('--width', `${snippetBarWidth}px`);
                snippetBar.style.setProperty('--height', `${snippetBarHeight}px`);
                snippetBar.style.setProperty('--scale', snippetBarScale);
                snippetBar.style.setProperty('--transformOriginX', `${snippetBarTransformOriginX}px`);
                snippetBar.style.setProperty('--transitionDuration', `${snippetBarTransitionDuration}ms`);
                console.log("setupSnippetBar");
            });

            //Initial style for allpanel
            const panels =document.querySelectorAll('.panelAll');
            let panelWidth = window.innerWidth -(CurrentSidebarWidth + DividerWidth);
            let panelHeight = window.innerHeight - (TopbarHeight + snippetBarHeight);
            let panelTransformX = CurrentSidebarWidth + DividerWidth;
            let panelTransformY = 32;
            let panelTransformScale = 1;
            let panelTransitionDuration = 0;
            
            
            //Initial style for each panel
            panels.forEach((panel,index)=>{
                panel.style.setProperty('--width',`${panelWidth}px`);
                panel.style.setProperty('--height',`${panelHeight}px`);
                panel.style.setProperty('--transformX', `${panelTransformX}px`);
                panel.style.setProperty('--transformY', `${panelTransformY}px`);
                panel.style.setProperty('--scale', panelTransformScale);
                panel.style.setProperty('--transitionDuration', `${panelTransitionDuration}ms`);
                console.log("setupPanel");
            });

            //Initial style for panel Bottom
            const panelBottom = document.querySelector('.panelBottom');
            let panelBottomHeight=29;
            panelBottom.style.setProperty('--height',`${panelBottomHeight}px`);

            //Initial each divider with its own --transformX Variable
            dividers.forEach((divider,index)=>{
                const TransformXVar = `--transformX-divider${index+1}`;//Unique Name for each divide
                divider.style.setProperty('--height',`${DividerHeight}px`);
                divider.style.setProperty('--width',`${DividerWidth}px`);
                divider.style.setProperty('--gripWidth',`${gripWidth}px`);
                divider.style.setProperty('--gripHeight',`${gripHeight}px`);
                divider.addEventListener('mouseenter',function(){
                    divider.style.setProperty('--gripColor',`${gripColorHover}`)
                });
                divider.addEventListener('mouseleave',function(){
                    divider.style.setProperty('--gripColor',`${gripColor}`)
                });
                divider.style.setProperty('--cursor',`${cursor}`);
                //Initialize each divider's transformX variable
                if (index == 0) {
                    divider.style.setProperty('--transformX', `${CurrentSidebarWidth}px`);//--transformX Value is the same with sidebarWidth
                } else {
                    divider.style.setProperty('--transformX', '0px');
                }//Initialize each divider's transformX variable
                divider.setAttribute('data-transformX',TransformXVar);//Store the transformX variable
            });
            
            //Set the function to move divider
            dividers.forEach(divider=>{
                //Mousedown events to start dragging a specific divider
                divider.addEventListener('mousedown',function(e) {
                    isDragging =true;
                    startX=e.clientX;//get the intialX position of the mouse
                    currentDivider = divider;// Track the current divider being dragged
                    InitialTransformX=parseFloat(getComputedStyle(divider).getPropertyValue('--transformX')); //Get the current --transformX value
                    console.log('transformX=',InitialTransformX);
                    console.log('currentDivider',currentDivider);
                    divider.style.setProperty('--background-color',`${DividerBackgroundColorMove}`);
                });

                //Mouse move event to handle dragging
                document.addEventListener('mousemove',function(e){
                    if (!isDragging || !currentDivider){
                        return;
                    }
                    // Calculate the new transformX based on mouse movement
                    currentX = e.clientX - startX;
                    const newTransformX = InitialTransformX + currentX;
                    
                    CurrentSidebarWidth=newTransformX; //Set the current sidebar width for sidebar Open/close buttons
                    panelTransformX = CurrentSidebarWidth + DividerWidth;//set the paneltransformX by the change of Sidebar 
                    if (CurrentSidebarWidth<30){
                        CurrentSidebarWidth=0; //Set the current to easy to close sidebar
                    }
                    currentDivider.style.setProperty('--transformX', `${newTransformX}px`);// set the divider
                    // Because Some reasons {if (CurrentDivider == dividerNextToSidebar)} always false so I use libaries function) {
                        if (compareDividers(currentDivider, dividerNextToSidebar)){ //Can use this to compare between two elements, true if no difference
                        sidebar.style.setProperty('--width', `${CurrentSidebarWidth}px`);// if no different, set the sidebar width
                        controlMainWidth(CurrentSidebarWidth,DividerWidth);//and set the panel transformX
                    }
                });

                // Mouse up event to stop dragging 
                document.addEventListener('mouseup', function() {
                    if (isDragging) {
                        console.log('mouseup');
                        isDragging = false;
                        currentDivider = null; // Reset the current divider
                        divider.style.setProperty('--background-color',`${DividerBackgroundColor}`);
                    }
                });
            });
                window.addEventListener('resize',function(){
                controlMainWidth(CurrentSidebarWidth,DividerWidth);
            });
    

//-----------------------------------------------------------------------------------------------
            

            var snippetTextareas = document.querySelectorAll('textarea[id^="code-"]');
            var snippetId = null;
            snippetTextareas.forEach(function(textarea) {
                var editor = CodeMirror.fromTextArea(textarea, {
                    lineNumbers: true,
                    mode: "python",  // Change to your desired language
                    matchBrackets: true,
                    autoCloseBrackets: true,
                    theme: "dracula"  // Set the theme to dracula for a dark background
                });

                
    
                // Enable real-time resizing
                editor.on("change", function() {
                    textarea.value = editor.getValue();
                });
    
                window.addEventListener('resize', function() {
                    editor.setSize("100%","100%");

                });
                

                editor.setSize("100%","100%");

            });
//----------------------------------------------------------------    
            //FeedBack
            var onlyCodeOption = document.getElementById("only-code");
            var withoutCodeOption = document.getElementById("without-code");
            var feedback = document.getElementById("feedback");
            
            //The Option will appear after debug
            //FeedBack will appear if the option been clicked
             // Handle the help option click
             document.getElementById('please-help').addEventListener('click', function() {
                document.getElementById('feedback-container').style.display = 'block';
                document.getElementById('help-option').style.display = 'none';
                CanActiveDisplay = false;
            });
            
            // Handle the do it myself click
            document.getElementById('do-it-myself').addEventListener('click', function() {
                document.getElementById('help-option').style.display = 'none';
            });
    
            // Function to send the selected feedback option to the backend
            function sendFeedback(option) {
                var snippetId = document.getElementById('current-snippet-id').value; // Get snippet ID from hidden input
                console.log(snippetId)
                if (!snippetId) {
                    alert("No snippet selected");
                    return;
                }
                fetch(`/'{{username}}'/'{{project.title}}'/feedback/50/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': '{{ csrf_token }}'
                    },
                    body: JSON.stringify({ feedback_option: option })
                })
                .then(response => {
                    if (!response.ok) {
                        return response.text().then(text => { throw new Error(text) });
                    }
                    return response.json();
                })
                .then(data=> {
                    console.log('Feedback option sent successfully:', data);
                    if (option == "only_code"){
                        displayFeedbackOnlyCode(data.output,data.diff);
                    }
                    else {
                        displayFeedbackWithoutCode(data.output)
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred: ' + error.message);
                });
            }
    
            function displayFeedbackOnlyCode(output,diff) {
                feedback.innerHTML = '<div id="feedback-code"></div>';
                var feedbackCodeDiv = document.getElementById("feedback-code");
                
                diff.forEach(line => {
                    var lineElement = document.createElement('div');
                    lineElement.textContent = line;
                    
                    if (line.startsWith('+')) {
                        lineElement.style.backgroundColor = 'rgba(0, 255, 0, 0.2)';  // Green background for additions
                    } else if (line.startsWith('-')) {
                        lineElement.style.backgroundColor = 'rgba(255, 0, 0, 0.2)';  // Red background for deletions
                    } else if (line.startsWith('@')) {
                        lineElement.style.backgroundColor = 'rgba(0, 0, 255, 0.2)';  // Blue background for line info
                    }
    
                    feedbackCodeDiv.appendChild(lineElement);
                });
    
                feedback.innerHTML += `<p>${output}</p>`;
            }
            
    
            function displayFeedbackWithoutCode(output){
                document.getElementById("feedback").innerText = output;
            }
    
            onlyCodeOption.addEventListener("click", function() {
                onlyCodeOption.classList.add("active");
                withoutCodeOption.classList.remove("active");
                feedback.textContent = "Wait for FeedBack Only Code";
                sendFeedback('only_code');
            });
    
            withoutCodeOption.addEventListener("click", function() {
                withoutCodeOption.classList.add("active");
                onlyCodeOption.classList.remove("active");
                feedback.textContent = "Wait for FeedBack Without Code";
                sendFeedback('without_code');
            });
        });


    </script>
<style>
    body {
        background-color: var(--background-root,#0E1525);
        font-family: var(--font-family-default);
        font-size: var(--font-size-default,14px);
        color: var(--foreground-default,#f5f9f5);
    }
    input{
        color:#f5f9f5;
    }

    .AllContainer1{

    }
    .AllContainer2{
        width: 100%;
        position: relative;
        padding-top: 0px;
        min-height: 100vh;
    }
    .AllContainer3{
        min-height: 100vh;
        width: 100%;
        position: relative;
        background-color: var(--background-root,#0E1525);
        padding-top: 0px;
    }
    .AllContainer4 {
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        background-color: var(--background-root,#0E1525);
        --surface-background: var(--background-root,#0E1525);
        --interactive-background: var(--background-default,#1C2333);
        --interactive-background--active: var(--background-higher,#2B3245);
        --interactive-border: var(--outline-dimmest,#2B3245);
        --interactive-border--hover: var(--outline-default,#4E5569);
        position: fixed;
        top: 0px;
        left: 0px;
        height: 100%;
        width: 100%;
    }
/******************************** Top Bar ********************************/
    .topbar {
        position: absolute;
        display:grid;
        grid-template-columns: 1fr max-content 1fr;
        border-width: 0px;
        border-style: solid;
        box-sizing:border-box;
        flex-basis:auto;
        flex-direction: column;
        flex-shrink: 0;
        outline:none;
        min-height:0px;
        min-width: 0px;
        width:100%;
        top:0px;
        left:0px;
        background-color: #f8f9fa;
        padding: 8px 12px;
        border-bottom: 1px solid #dee2e6;
        align-items: center;
        -webkit-box-align:center;
        color:black;
    }

    .topbar-left {
        border-width: 0px;
        border-style:solid;
        box-sizing:border-box;
        flex-basis:auto;
        flex-shrink: 0;
        outline:none;
        min-height:0px;
        min-width:0px;
        display: flex;
        flex-direction: row;
        -webkit-box-align:center;
        align-items: center;
        -webkit-box-pack:start;
        justify-content: flex-start;
    }

    .topbar-middle {
        display:flex;
        border-width:0px;
        border-style:solid;
        box-sizing:border-box;
        flex-basis:auto;
        flex-shrink: 0;
        min-height:0px;
        min-width:0px;
        position:relative;
        flex-direction:row;
        gap:8px;
        align-items:center;
    }

    .topbar-right {
        display:flex;
        border-width:0px;
        border-style:solid;
        box-sizing:border-box;
        flex-basis:auto;
        flex-shrink: 0;
        min-height:0px;
        min-width:0px;
        flex-direction:row;
        gap:6px;
        align-items: center;
        justify-content: flex-end;
    }

    #Debug {
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        background-color: #046c00;
        color: #fff;
        border: none;
        cursor: pointer;
        width:100px;
    }

/******************************** Top Bar ********************************/

    .SideBarMain-container {
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        width: 100%;
        left: 0px;
        position: absolute;
    }

/******************************** SideBar ********************************/

    #SideBarButton {
            margin-left: 10px; 
    }

    .SideBarContainer-1{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        flex: 1 1 auto;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        height: 100%;
        position: absolute;
        top: 0px;
        left: 0px;
        display: flex;
        flex-direction: row;
        -webkit-box-flex: 1;
        overflow: auto;
        opacity: var(--opacity,1);
        pointer-events: var(--pointerEvents,auto);
        transition: opacity 0.2s 200ms;
        width: var(--width);
        visibility: var(--sidebarVisibility ,visible);
    }

    .SideBarContainer-2{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        visibility: var(--mainContentVisibility,visible);
    }

    .SideBarContainer-3{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        position: absolute;
        flex-direction: column;
        gap: var(--space-4);
        top: 0px;
        left: 0px;
        width: 100%;
        height: 100%;
        min-width: 180px;
        animation: 0.2s ease-in-out 0s 1 normal none running animation-5j8bii;
    }

    .SideBarSearch-1{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        padding-left: 8px;
        z-index: 3;
    }

    .SideBarSearch-2{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        top: 0px;
        left: 0px;
        width: 100%;
        z-index: 3;
    }
    .SideBarContainer-2 > div:first-of-type > div:first-of-type{
        padding-left: 0px;
        padding-right: 0px;
        padding-top: 0px;
    }

    .SideBarSearch-3{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        flex: 1 1 auto;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        -webkit-box-flex: 1;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: row;
        -webkit-box-pack: center;
        justify-content: center;
        border-radius: 4px;
        container-name: CommandBar;
        container-type: var(--containerType,normal);
    }

    .SideBarSearch-4{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex: 1 1 auto;
        flex-direction: column;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        -webkit-box-flex: 1;
        max-width: calc(600px - 16px);
        font-size: var(--fontSize,14px);
        max-width:100%;
    }

    .SideBarSearch-5{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        padding-bottom: 0px;
        padding-top: var(--inputBarPadding,0px);
        padding-inline: var(--inputBarPadding,0px);
    }

    .SideBarSearch-6{
        transition-property: background-color, box-shadow;
        transition-duration: 120ms;
        transition-timing-function: ease-out;
        background-color: var(--interactive-background,#1C2333);
        border-color: transparent;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        flex: 1 1 auto;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        display: flex;
        flex-direction: row;
        -webkit-box-align: center;
        align-items: center;
        -webkit-box-flex: 1;
        height: 2.29em;
        border-radius: 0.29em;
    }
    .SideBarSearch-6:hover{
        cursor: pointer;
    }
    .SideBarSearch-Input{
        -webkit-box-align: stretch;
        align-items: stretch;
        box-sizing: border-box;
        display: flex;
        flex: 1 1 auto;
        flex-direction: column;
        min-height: 0px;
        min-width: 0px;
        -webkit-box-flex: 1;
        height: 100%;
        font-size: 1em;
        padding: 0px 0.57em;
        background-color: transparent;
        border: 0px none;
        outline: none 0px;
    }

    .SideBarFilesHistory{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex: 1 1 auto;
        flex-direction: column;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        -webkit-box-flex: 1;
    }

    .SideBarFilesOptions{
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        flex-direction: row;
        gap: 4px;
        -webkit-box-align: center;
        align-items: center;
        height: 36px;
        user-select: none;
    }

    .SideBarFilesOptionsLeft{
        box-sizing: border-box;
        display: flex;
        flex: 1 1 auto;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        border: none;
        background: transparent;
        color: inherit;
        font-style: inherit;
        font-variant: inherit;
        font-weight: inherit;
        font-stretch: inherit;
        font-size: inherit;
        font-family: inherit;
        font-optical-sizing: inherit;
        font-size-adjust: inherit;
        font-kerning: inherit;
        font-feature-settings: inherit;
        font-variation-settings: inherit;
        line-height: normal;
        app-region: no-drag;
        user-select: none;
        height: 100%;
        border-radius: 4px;
        margin-left: 8px;
        -webkit-box-flex: 1;
        flex-direction: row;
        gap: 4px;
        -webkit-box-align: center;
        align-items: center;
        cursor: pointer;
        position: relative;
    }

    .ButtonExplain{
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        flex-direction: row;
        gap: 4px;
        -webkit-box-align: center;
        align-items: center;
    }

    .ButtonExplainSpan{
        -webkit-box-align: stretch;
    align-items: stretch;
    border-width: 0px;
    border-style: solid;
    box-sizing: border-box;
    flex-basis: auto;
    flex-direction: column;
    flex-shrink: 0;
    outline: none;
    min-height: 0px;
    min-width: 0px;
    display: inline;
    overflow-wrap: break-word;
    line-height: var(--lineHeight,1.6);
    color: var(--color);
    font-weight: var(--font-weight-medium,500);
    font-size: 13px;
    }

    .SideBarFilesOptionsRight{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        flex-direction: row;
        gap: 4px;
        padding-right: 2px;
    }
    
    .SideBarFilesIndex1{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex: 1 1 auto;
        flex-direction: column;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        -webkit-box-flex: 1;
        overflow-y: auto;
        scrollbar-width: none;
        position: relative;
    }

    .SideBarFilesIndex2{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        padding-bottom: 8px;
    }

    .SideBarFilesIndex3{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        position: absolute;
        top: 0px;
        left: 0px;
        width: 100%;
        height: 100%;
    }

    .SideBarFilesIndex4{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        position: absolute;
        top: 0px;
        left: 0px;
        width: 100%;
        height: 100%;
        padding-left:8px;
    }

    .SideBarFilesIndex5{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-width: 0px;
        padding-left: 2px;
        padding-right: 2px;
        position: relative;
        overflow-y: auto;
        height: 100%;
        min-height: var(--minHeight,24px);
    }

    .SideBarFilesIndex6{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        position: relative;
        height: var(--scrollHeight,88px);
    }
    
    .SideBarFilesTreeItems{
        box-sizing: border-box;
        flex: 1 1 auto;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        position: absolute;
        top: 0px;
        left: 0px;
        width: calc(100% - var(--rowLeftIndent,0px));
        height: var(--rowHeight,24px);
        transform: translateY(var(--rowY,8px));
        margin-left: var(--rowLeftIndent,0px);
        -webkit-box-flex: 1;
        display: flex;
        flex-direction: row;
        -webkit-box-align: center;
        align-items: center;
        transition-property: background-color, box-shadow;
        transition-timing-function: ease-out;
        border-width: 1px;
        border-style: solid;
        border-color: transparent;
        background-color: var(--nodeBackgroundColor,transparent);
        border-radius: var(--borderRadius,4px);
        cursor: pointer;
        --hasUnsavedChangesDisplay: flex;
        transition-duration: 0ms;
    }
    .SideBarFilesTreeItems:hover{
        cursor:pointer;
    }

    .SideBarFilesTreeItems1{
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        flex: 1 1 auto;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        display: flex;
        flex-direction: row;
        -webkit-box-align: center;
        align-items: center;
        -webkit-box-flex: 1;
        padding-left: var(--horizontalPadding,4px);
        padding-right: var(--horizontalPadding,4px);
    }

    .SideBarFilesIcon{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        margin-right: var(--iconTextGap,6px);
    }

    .SideBarFilesIcon img{
        min-width: var(--iconSize,16px) !important;
        min-height: var(--iconSize,16px) !important;
        width: var(--iconSize,16px) !important;
        height: var(--iconSize,16px) !important;
    }

    .SideBarFilesName{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        flex: 1 1 auto;
        flex-direction: column;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        display: inline-block;
        max-width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        font-size: var(--fontSize,13px);
        -webkit-box-flex: 1;
        color: var(--statusColor,#C2C8CC);
    }

    .SideBarFilesMenuButton{
        box-sizing: border-box;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        border: 1px solid transparent;
        background: transparent;
        color: inherit;
        font-style: inherit;
        font-variant: inherit;
        font-weight: inherit;
        font-stretch: inherit;
        font-size: inherit;
        font-family: inherit;
        font-optical-sizing: inherit;
        font-size-adjust: inherit;
        font-kerning: inherit;
        font-feature-settings: inherit;
        font-variation-settings: inherit;
        line-height: normal;
        app-region: no-drag;
        user-select: none;
        height: 100%;
        -webkit-box-align: center;
        align-items: center;
        -webkit-box-pack: center;
        justify-content: center;
        cursor: pointer;
        transition-property: background-color, box-shadow;
        transition-timing-function: ease-out;
        display: var(--contextMenuButtonDisplay,none);
        border-radius: 0 var(--borderRadius,4px) var(--borderRadius,4px) 0;
        transition-duration: 0ms;
    }

    .SideBarFilesHistoryDivider1{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        position: relative;
        height: 0px;
        width: 100%;
        z-index: 1;
        cursor: ns-resize;
    }
    
    .SideBarFilesHistoryDivider2{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        display: flex;
        flex-basis: auto;
        flex-direction: column;
        flex-shrink: 0;
        outline: none;
        min-height: 0px;
        min-width: 0px;
        position: relative;
        height: 8px;
        top: -4px;
    }
/******************************** SideBar ***************************/

    /*Divider*/
    .divider{
        border-width:0px;
        border-style:solid;
        box-sizing:border-box;
        display:flex;
        flex-basis:auto;
        flex-direction:auto;
        flex-shrink: 0;
        outline:none;
        -webkit-box-align:center;
        align-items: center;
        -webkit-box-pack:center;
        justify-content: center;
        position:absolute;
        top:0px;
        left:0px;
        opacity:1;
        transition:opacity 0.2s 200ms;
        transform:translate(var(--transformX,0px), var(--transformY,0px));
        width:var(--width);
        height:var(--height);
        cursor:var(--cursor);
        background-color:var(--background-color);
    }
    .divider:hover{
        --gripColor:#e2d8d87f;
    }
    .blanket{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width:0px;
        border-style:solid;
        box-sizing:border-box;
        display: flex;
        flex-basis:auto;
        flex-direction: column;
        flex-shrink: 0;
        outline:none;
        min-height:0px;
        min-width:0px;
        position:absolute;
        top:0px;
        left:0px;
        width:100%;
        height:100%;
    }

    .grip{
        -webkit-box-align: stretch;
        align-items: stretch;
        border-width:0px;
        border-style:solid;
        box-sizing:border-box;
        display: flex;
        flex-basis:auto;
        flex-direction: column;
        flex-shrink: 0;
        outline:none;
        min-height:0px;
        min-width:0px;
        border-radius:4px;
        visibility:var(--gripVisibility);
        background:var(--gripColor,#2B3245);
        height:var(--gripHeight);
        width: var(--gripWidth);
        transition-property: opacity, width, height, background-color;
        transition-timing-function:ease-out;
    }
    main{
        display:block;
    }

    .MainContainer {
        animation:0.2s ease-in-out 0s 1 normal none;
        transition:opacity 0.2s 200ms;
    }

</style>
</body>
</html>
